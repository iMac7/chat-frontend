"use strict";(self.webpackChunkchat_frontend=self.webpackChunkchat_frontend||[]).push([[944],{944:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var o=n(861),r=n(885),i=n(757),a=n.n(i),s=n(791),c=n(871),u=n(307),l=n(701),f=n(184);var p=function(e){var t=(0,c.s0)(),n=(0,s.useContext)(u.V),i=n.userdata,p=n.isLoggedIn,h=null===i||void 0===i?void 0:i.userID,d=(0,s.useState)({}),m=(0,r.Z)(d,2),x=m[0],g=m[1],b=(0,s.useState)(""),v=(0,r.Z)(b,2),j=v[0],k=v[1],y=(0,s.useState)(""),C=(0,r.Z)(y,2),N=C[0],S=C[1],T=(0,s.useState)(),w=(0,r.Z)(T,2),Z=w[0],U=w[1],P=(0,s.useState)(""),D=(0,r.Z)(P,2),O=D[0],I=D[1],J=(0,s.useState)(""),L=(0,r.Z)(J,2),z=L[0],B=L[1],R=(0,s.useCallback)((function(){fetch("http://localhost:3001/profile/".concat(h),{headers:{authorization:JSON.stringify(i)}}).then((function(e){return e.json()})).then((function(t){console.log(t),g(t),e.setProfilePic(t.profileURL)}))}),[h,i,e]);(0,s.useEffect)((function(){if(!1===p)t("/signIn");else try{R()}catch(e){console.log(e)}}),[h,i,t,p,R]);var A=function(){var e=(0,o.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==N.trim()||""!==j.trim()){e.next=5;break}return I("nothing changed!"),setTimeout((function(){I("")}),2e3),e.abrupt("return");case 5:return(n=new FormData).append("username",N),n.append("bio",j),N===x.username&&j===x.bio&&(I("nothing changed!"),setTimeout((function(){I("")}),2e3)),e.prev=9,e.next=12,fetch("http://localhost:3001/profile/".concat(h,"/update"),{method:"POST",headers:{authorization:JSON.stringify(i),"Content-Type":"application/json"},body:JSON.stringify({username:N,bio:j})}).then((function(e){return e.json()})).then((function(e){console.log(e),"string"===typeof e&&(I(e),setTimeout((function(){I("")}),2e3))}));case 12:k(""),S(""),setTimeout((function(){R()}),5e3),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,o.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Z){e.next=6;break}B("no image selected"),setTimeout((function(){B("")}),2e3),e.next=17;break;case 6:return(n=new FormData).append("image",Z),e.prev=8,e.next=11,fetch("http://localhost:3001/profilepic/".concat(h,"/update"),{method:"POST",headers:{authorization:JSON.stringify(i)},body:n}).then((function(e){return e.json()})).then((function(e){console.log(e),"string"===typeof e&&(B(e),setTimeout((function(){B("")}),2e3),U())}));case 11:setTimeout((function(){R()}),5e3),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t){return e.apply(this,arguments)}}();return p&&(0,f.jsxs)("div",{className:"profile",children:[(0,f.jsx)("div",{className:"topContainer",children:(0,f.jsx)("button",{id:"back",onClick:function(){return t(-1)},children:"BACK"})}),(0,f.jsxs)("div",{className:"bottomContainer",children:[(0,f.jsxs)("div",{className:"bottomContainer1",children:[x.profileURL&&(0,f.jsx)("img",{src:"http://localhost:3001/".concat(x.profileURL),alt:"",className:"profilePic"}),(0,f.jsx)("button",{className:"profilebtn",onClick:A,children:(0,f.jsx)("strong",{children:"Update Profile"})})]}),(0,f.jsxs)("div",{className:"bottomContainer2",children:["Username : ",(0,f.jsx)("input",{className:"edit",type:"text",placeholder:x.username,onChange:function(e){return S(e.target.value)}}),"Bio : ",(0,f.jsx)("input",{className:"edit",type:"text",placeholder:x.bio?x.bio:"",onChange:function(e){return k(e.target.value)}}),(0,f.jsx)("p",{style:{color:"blue"},children:O}),(0,f.jsx)("h3",{children:"Update profile picture"}),(0,f.jsxs)("div",{className:"profileUpdate",children:[(0,f.jsx)(l.Z,{childImage:U}),(0,f.jsx)("button",{id:"tweetBtn",onClick:E,children:"UPDATE"})]})]}),(0,f.jsx)("p",{style:{color:"blue"},children:z})]})]})}}}]);
//# sourceMappingURL=944.3e92edf4.chunk.js.map